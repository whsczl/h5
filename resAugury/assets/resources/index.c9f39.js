window.__require=function t(e,i,h){function s(c,o){if(!i[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var r="function"==typeof __require&&__require;if(!o&&r)return r(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){return s(e[c][1][t]||t)},d,d.exports,t,e,i,h)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<h.length;c++)s(h[c]);return s}({Select:[function(t,e){"use strict";cc._RF.push(e,"c5083RQTBVHarEH1S7sRkhN","Select");cc.Class({extends:cc.Component,properties:{content:{default:null,type:cc.Node},deltaX:100,centerScale:1,minScale:1,scrollSpeed:300},onLoad:function(){this.selectEvents=[],this.childs=[],this.isTouching=!1,this.hasTouchMove=!1,this.isTestX=!1,this.touchId=null,this.currentIndex=0,this.toMoveX=1,this.dx=0,this.moveAim=0;for(var t=0;t<this.content.children.length;t++)this.childs[t]=this.content.children[t],this.childs[t].x=this.deltaX*(t-1);this.scrollTo(0,!1)},scrollTo:function(t,e){if(t<0&&t>=this.childs.length)return cc.log(this.node.name+"->\u79fb\u52a8\u8d85\u51fa\u8fb9\u754c");if(this.currentIndex=t,this.moveAim=t,e)this.isTestX=!0,cc.Component.EventHandler.emitEvents(this.selectEvents,{target:this,type:0,index:this.currentIndex});else for(var i=0;i<this.childs.length;i++)this.checkChildX(this.childs[i],(i-t)*this.deltaX)},scrollToLeft:function(){this.toMoveX=1,this.scrollTo((this.currentIndex-1+this.childs.length)%this.childs.length),cc.log("\u5411\u5de6"+(this.currentIndex-1+this.childs.length)%this.childs.length)},scrollToRight:function(){this.toMoveX=-1,this.scrollTo((this.currentIndex+1+this.childs.length)%this.childs.length),cc.log("\u5411\u53f3"+(this.currentIndex+1+this.childs.length)%this.childs.length)},checkChildX:function(t,e){e>this.childs.length/2*this.deltaX?e-=this.childs.length*this.deltaX:e<-this.childs.length/2*this.deltaX&&(e+=this.childs.length*this.deltaX),t.x=e;var i=Math.min(Math.abs(e),this.deltaX);t.scale=(1-i/this.deltaX)*(this.centerScale-this.minScale)+this.minScale},start:function(){this.content.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.content.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch,this),this.content.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.content.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onTouch:function(t){if(null==this.touchId||t.touch==this.touchId)if(t.type!=cc.Node.EventType.TOUCH_START){this.hasTouchMove=!0;var e=t.getLocation().x-this.dx;this.move(e),this.dx=t.getLocation.x;var i={target:this,type:1,dx:this.dx};cc.Component.EventHandler.emitEvents(this.selectEvents,i)}else{this.isTouching=!0,this.hasTouchMove=!1,this.isTestX=!1,this.touchId=t.touch,this.dx=t.getStartLocation().x;var h={target:this,type:0,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,h)}},onTouchEnd:function(t){if(null==this.touchId||t.touch==this.touchId){this.isTouching=!1,t.type!=cc.Node.EventType.TOUCH_END&&t.type!=cc.Node.EventType.TOUCH_CANCEL||(this.touchId=null);var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.hasTouchMove){for(var i=this.deltaX,h=0,s=0;s<this.childs.length;s++)Math.abs(this.childs[s].x)<=i&&(i=Math.abs(this.childs[s].x),h=s);this.moveAim=h,this.toMoveX=this.childs[h].x>=0?-1:1,this.isTestX=!0}else{var n=Math.ceil((e.x-this.deltaX/2)/this.deltaX);if(0===n){var c={target:this,type:2,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,c)}else this.moveAim=(this.currentIndex+n+this.childs.length)%this.childs.length,this.toMoveX=n>0?-1:1,this.isTestX=!0}}},move:function(t){for(var e=0;e<this.childs.length;e++)this.checkChildX(this.childs[e],this.childs[e].x+t)},update:function(t){if(!this.isTouching&&this.isTestX){for(var e=this.toMoveX*t*this.scrollSpeed,i=this.childs[this.moveAim].x,h=0;h<this.childs.length;h++)this.checkChildX(this.childs[h],this.childs[h].x+e);var s=this.childs[0].x,n=Math.round(s/this.deltaX),c=this.deltaX*n,o=this.childs[this.moveAim].x;if(i*o<0&&Math.abs(o)<this.deltaX){this.isTestX=!1;for(var l=0;l<this.childs.length;l++)if(Math.abs(this.childs[l].x)<=Math.abs(e)){this.currentIndex=l;break}for(h=0;h<this.childs.length;h++)this.checkChildX(this.childs[h],this.childs[h].x+c-s);var r={target:this,type:2,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,r)}}}}),cc._RF.pop()},{}],UIScrollSelect:[function(t,e,i){"use strict";cc._RF.push(e,"2c5b54HAs9KdZ9qoPZhyqxX","UIScrollSelect");var h,s=this&&this.__extends||(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,h){var s,n=arguments.length,c=n<3?e:null===h?h=Object.getOwnPropertyDescriptor(e,i):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,h);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0}),i.EventType=void 0;var c,o=cc._decorator,l=o.ccclass,r=o.property;(function(t){t[t.SCROLL_START=0]="SCROLL_START",t[t.SCROLL_ING=1]="SCROLL_ING",t[t.SCROLL_END=2]="SCROLL_END"})(c=i.EventType||(i.EventType={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.deltaX=100,e.centerScale=1,e.minScale=1,e.scrollSpeed=300,e.selectEvents=[],e.childs=[],e.isTouching=!1,e.hasTouchMove=!1,e.isTestX=!1,e._touchId=null,e.currentIndex=0,e._toMoveX=1,e.dx=0,e.moveAim=0,e}return s(e,t),e.prototype.onLoad=function(){this.childs=[];for(var t=0;t<this.content.children.length;t++)this.childs[t]=this.content.children[t],this.childs[t].x=this.deltaX*(t-1);this.isTouching=!1,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=null,this.scrollTo(0,!1)},e.prototype.scrollTo=function(t,e){if(void 0===e&&(e=!0),t<0&&t>=this.childs.length)return console.error(this.node.name+"->\u79fb\u52a8\u8d85\u51fa\u8fb9\u754c\u9762");if(this.currentIndex=t,this.moveAim=t,e)this.isTestX=!0,cc.Component.EventHandler.emitEvents(this.selectEvents,{target:this,type:c.SCROLL_START,index:this.currentIndex});else for(var i=0;i<this.childs.length;i++)this._checkChildX(this.childs[i],(i-t)*this.deltaX)},e.prototype.scrollToLeft=function(){this._toMoveX=1,this.scrollTo((this.currentIndex-1+this.childs.length)%this.childs.length)},e.prototype.scrollToRight=function(){this._toMoveX=-1,this.scrollTo((this.currentIndex+1+this.childs.length)%this.childs.length)},e.prototype._checkChildX=function(t,e){e>this.childs.length/2*this.deltaX?e-=this.childs.length*this.deltaX:e<-this.childs.length/2*this.deltaX&&(e+=this.childs.length*this.deltaX),t.x=e;var i=Math.min(Math.abs(e),this.deltaX);t.scale=(1-i/this.deltaX)*(this.centerScale-this.minScale)+this.minScale},e.prototype.start=function(){this.content.on(cc.Node.EventType.TOUCH_START,this._onTouch,this),this.content.on(cc.Node.EventType.TOUCH_MOVE,this._onTouch,this),this.content.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.content.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},e.prototype._onTouch=function(t){if(null==this._touchId||t.touch==this._touchId)if(t.type!=cc.Node.EventType.TOUCH_START){this.hasTouchMove=!0;var e=t.getLocation().x-this.dx;this._move(e),this.dx=t.getLocation().x;var i={target:this,type:c.SCROLL_ING,dx:this.dx};cc.Component.EventHandler.emitEvents(this.selectEvents,i)}else{this.isTouching=!0,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=t.touch,this.dx=t.getStartLocation().x;var h={target:this,type:c.SCROLL_START,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,h)}},e.prototype._onTouchEnd=function(t){if(null==this._touchId||t.touch==this._touchId){this.isTouching=!1,t.type!=cc.Node.EventType.TOUCH_END&&t.type!=cc.Node.EventType.TOUCH_CANCEL||(this._touchId=null);var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.hasTouchMove){for(var i=this.deltaX,h=0,s=0;s<this.childs.length;s++)Math.abs(this.childs[s].x)<=i&&(i=Math.abs(this.childs[s].x),h=s);this.moveAim=h,this._toMoveX=this.childs[h].x>=0?-1:1,this.isTestX=!0}else{var n=Math.ceil((e.x-this.deltaX/2)/this.deltaX);if(0===n){var o={target:this,type:c.SCROLL_END,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,o)}else this.moveAim=(this.currentIndex+n+this.childs.length)%this.childs.length,this._toMoveX=n>0?-1:1,this.isTestX=!0}}},e.prototype._move=function(t){for(var e=0;e<this.childs.length;e++)this._checkChildX(this.childs[e],this.childs[e].x+t)},e.prototype.update=function(t){if(!this.isTouching&&this.isTestX){for(var e=this._toMoveX*t*this.scrollSpeed,i=this.childs[this.moveAim].x,h=0;h<this.childs.length;h++)this._checkChildX(this.childs[h],this.childs[h].x+e);var s=this.childs[0].x,n=Math.round(s/this.deltaX),o=this.deltaX*n,l=this.childs[this.moveAim].x;if(i*l<0&&Math.abs(l)<this.deltaX){this.isTestX=!1;for(var r=0;r<this.childs.length;r++)if(Math.abs(this.childs[r].x)<=Math.abs(e)){this.currentIndex=r;break}for(h=0;h<this.childs.length;h++)this._checkChildX(this.childs[h],this.childs[h].x+o-s);var d={target:this,type:c.SCROLL_END,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,d)}}},e.EventType=c,n([r(cc.Node)],e.prototype,"content",void 0),n([r({type:cc.Integer,tooltip:"\u5355\u4e2a\u63a7\u4ef6\u4e4b\u95f4\u7684\u8ddd\u79bb"})],e.prototype,"deltaX",void 0),n([r({type:cc.Integer,tooltip:"\u4e2d\u5fc3\u70b9\u7684\u7f29\u653e\u6bd4\u4f8b"})],e.prototype,"centerScale",void 0),n([r({type:cc.Integer,tooltip:"\u8fb9\u7f18\u70b9\u7684\u7f29\u653e\u6bd4\u4f8b"})],e.prototype,"minScale",void 0),n([r({type:cc.Integer,tooltip:"\u6eda\u52a8\u65f6\u7684\u901f\u5ea6"})],e.prototype,"scrollSpeed",void 0),n([r({type:cc.Component.EventHandler,tooltip:"\u9009\u62e9\u540e\u7684\u56de\u8c03"})],e.prototype,"selectEvents",void 0),n([l],e)}(cc.Component);i.default=d,cc._RF.pop()},{}]},{},["Select","UIScrollSelect"]);